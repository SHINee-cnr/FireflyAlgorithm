package operation;

import com.mathworks.toolbox.javabuilder.MWArray;
import com.mathworks.toolbox.javabuilder.MWClassID;
import com.mathworks.toolbox.javabuilder.MWComplexity;
import com.mathworks.toolbox.javabuilder.MWNumericArray;

import domain.ObjectiveFun;
import drawplot.Plot;

public class PlotFigure {
	private ObjectiveFun objectiveFun;

	/**
	 * 输出目标函数三维图形和二维轮廓
	 */
	public void plotObjFun() {
		// TODO Auto-generated method stub
		MWNumericArray x = null; // 存放x值的数组
		MWNumericArray y = null; // 存放y值的数组
		Plot thePlot = null; // plotter类的实例（在MatLab编译时，新建的类）
		try {
			String funtionString = "exp(-(x-4)^2-(y-4)^2)+exp(-(x+4)^2-(y-4)^2)+2*exp(-x^2-(y+4)^2)+2*exp(-x^2-y^2)";
			int[] range = { 1, 4 };
			int[] g = { 1, 1 };
			MWNumericArray ra = MWNumericArray.newInstance(range, MWClassID.DOUBLE, MWComplexity.REAL);
			MWNumericArray nGrid = MWNumericArray.newInstance(g, MWClassID.DOUBLE, MWComplexity.REAL);
			ra.set(1, -5);
			ra.set(2, 5);
			ra.set(3, -5);
			ra.set(4, 5);
			nGrid.set(1, 100);
			// 初始化plotter的对象
			thePlot = new Plot();
			// 作图
			thePlot.drawplot(funtionString, ra, nGrid);
			thePlot.waitForFigures();
		}

		catch (Exception e) {
			System.out.println("Exception: " + e.toString());
		}

		finally {
			// 释放本地资源
			MWArray.disposeArray(x);
			MWArray.disposeArray(y);
			if (thePlot != null)
				thePlot.dispose();
		}

	}

	public ObjectiveFun getObjectiveFun() {
		return objectiveFun;
	}

	public void setObjectiveFun(ObjectiveFun objectiveFun) {
		this.objectiveFun = objectiveFun;
	}
}
